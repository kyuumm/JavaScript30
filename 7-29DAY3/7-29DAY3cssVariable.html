<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Scoped CSS Variables and JS</title>
  <link rel="icon" href="https://fav.farm/ğŸ”¥" />
</head>

<body>
  <h2>Update CSS Variables with <span class='hl'>JS</span></h2>

  <div class="controls">
    <label for="spacing">Spacing:</label>
    <input id="spacing" type="range" name="spacing" min="10" max="200" value="10" data-sizing="px">

    <label for="blur">Blur:</label>
    <input id="blur" type="range" name="blur" min="0" max="25" value="10" data-sizing="px">

    <label for="base">Base Color</label>
    <input id="base" type="color" name="base" value="#ffc600">
  </div>
  <!-- data-sizing:
ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§ï¼Œè¯­æ³•æ˜¯ <input data-å±æ€§å="å€¼">


-->
  <img src="https://source.unsplash.com/7bwQXzbF6KE/800x500">

  <style>
    /*
      misc styles, nothing to do with CSS variables
    */

    body {
      text-align: center;
      background: #ffffff;
      color: rgb(64, 62, 62);
      font-family: 'helvetica neue', sans-serif;
      font-weight: 100;
      font-size: 50px;
    }

    .controls {
      margin-bottom: 50px;
    }

    input {
      width: 100px;
    }

    :root {
      --base: #afafaf;
      --spacing: 10px;
      --blur: 10px;

    }

    .h1 {
      color: var(base);
    }

    img {
      padding: var(--spacing);
      background-color: var(--base);

      filter: blur(var(--blur));
      /* filter å±æ€§å°†æ¨¡ç³Šæˆ–é¢œè‰²åç§»ç­‰å›¾å½¢æ•ˆæœåº”ç”¨äºå…ƒç´ ã€‚æ»¤é•œé€šå¸¸ç”¨äºè°ƒæ•´å›¾åƒã€èƒŒæ™¯å’Œè¾¹æ¡†çš„æ¸²æŸ“ã€‚ */
    }

    /* 
    :root é€‰æ‹©å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é€‰æ‹©å™¨ï¼Œå®ƒé€‰æ‹©æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚
    --base å˜é‡åï¼Œ--spacing å˜é‡åï¼Œ--blur å˜é‡åï¼Œéƒ½æ˜¯è‡ªå®šä¹‰çš„å˜é‡åã€‚
    æ ¼å¼ï¼š--å˜é‡åï¼šå€¼
    
    ä½¿ç”¨æ–¹æ³•ï¼š
    padding: var(--spacing);

    æŠŠcsså˜é‡æƒ³è±¡æˆå·¥å…·ç¬”ï¼Œç”¨çš„æ—¶å€™ç›´æ¥æ‹¿

    */
  </style>

  <script>
    const inputs = document.querySelectorAll('.controls input');

    //æ„æ€æ˜¯ï¼Œéå†inputsæ•°ç»„å†…çš„å…ƒç´ ï¼Œç»™æ¯ä¸ªinputï¼ˆè¿™ä¸ªæ˜¯ä¸´æ—¶å˜é‡éšä¾¿èµ·åå­—ï¼‰å…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬    
    //inputs.forEach(input => input.addEventListener('change', handleUpdate));
    inputs.forEach(input => input.addEventListener('mousemove', handleUpdate));
    //åŒºåˆ«ï¼šchangeæ˜¯ç»Ÿè®¡é¼ æ ‡ç§»åŠ¨ç»“æœåçš„ï¼ŒmouseMoveåˆ™æ˜¯å®æ—¶æ›´æ–°ï¼Œé¼ æ ‡åŠ¨ä¸€ä¸‹å°±æ›´æ–°



    function handleUpdate() {
      const suffix = this.dataset.sizing || '';
      //å»æ‹¿å½“å‰ input å…ƒç´ çš„ data-sizing å±æ€§çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå°±ç”¨ç©ºå­—ç¬¦ä¸²
      //datasetï¼šè®¿é—®htmlä¸Šæ‰€æœ‰data-å¼€å¤´çš„å±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ
      // å¯¹è±¡é‡Œçš„å±æ€§åå°±æ˜¯data-å¼€å¤´çš„å±æ€§åï¼Œå±æ€§å€¼å°±æ˜¯data-å¼€å¤´çš„å±æ€§å€¼ã€‚
      //  ç±»ä¼¼ {    sizing: "px"    }

      //é€‰çš„æ˜¯ä»€ä¹ˆï¼Ÿdata-sizing="px",suffixé€‰çš„å°±æ˜¯pxå­—ç¬¦ä¸²
      //ä¸ºä»€ä¹ˆâ€˜â€™ï¼Ÿå› ä¸ºé¢œè‰²é€‰æ‹©å™¨æ²¡æœ‰100pxè¿™ç§å•ä½ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹¼æ¥å•ä½

      document.documentElement.style.setProperty(`--${this.name}`, this.value + suffix);

      //this.valueé€‰æ‹©çš„æ˜¯inputå†…æ»‘å—çš„å€¼ï¼Œ
      //this.value+suffixæ˜¯æŠŠinputå†…çš„å€¼åŠ ä¸Šåç¼€ï¼Œæ¯”å¦‚pxï¼Œç„¶åèµ‹å€¼ç»™csså˜é‡
      //eg.:  "100"+"px" = "100px" èµ‹å€¼ç»™csså˜é‡

      //setPropertyï¼šæ ¼å¼setProperty(propertyName, value)
      //propertyNameæ˜¯è¦è®¾ç½®çš„ CSS å±æ€§åï¼ˆå¯ä»¥æ˜¯å˜é‡ï¼ˆ--baseï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€š CSS åï¼ˆ'background-color'ï¼‰ï¼‰
    }
  </script>

</body>

</html>